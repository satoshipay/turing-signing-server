INSERT INTO contracts (contract, signer)
  SELECT 'GCNANNNLGDICM5NJOT7QD7MLW34M4WLJPTNOAXWEAR4CE4LO23FZ5WDR', 'SDRJWX2SNJTMFFGGGO4DQXL7X5SHVENZLYX6K7LCZQSIJ6XSEMTCXLHY'
  ON CONFLICT DO NOTHING;

UPDATE contracts SET
	pendingtxns = NULL
  WHERE contract = 'GCNANNNLGDICM5NJOT7QD7MLW34M4WLJPTNOAXWEAR4CE4LO23FZ5WDR'
    AND signer = 'SDRJWX2SNJTMFFGGGO4DQXL7X5SHVENZLYX6K7LCZQSIJ6XSEMTCXLHY';

UPDATE contracts SET
	pendingtxns = (SELECT array_agg(DISTINCT e) FROM unnest(pendingtxns || '{"1179b9ddc9972bb8efd9039c2955e144241f981fe45ca792961f641031ca3212"}') e)
  WHERE contract = 'GCNANNNLGDICM5NJOT7QD7MLW34M4WLJPTNOAXWEAR4CE4LO23FZ5WDR'
    AND signer = 'SDRJWX2SNJTMFFGGGO4DQXL7X5SHVENZLYX6K7LCZQSIJ6XSEMTCXLHY'
    AND NOT pendingtxns @> '{"1179b9ddc9972bb8efd9039c2955e144241f981fe45ca792961f641031ca3212"}';
